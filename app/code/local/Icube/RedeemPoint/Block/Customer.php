<?phpclass Icube_RedeemPoint_Block_Customer extends Mage_Customer_Block_Account_Dashboard  {     public function getAction($type){        $url    = Mage::getUrl('redeempoint/customer/available');        return $url;     }          public function getAjaxAction(){        $url    = Mage::getUrl('redeempoint/customer/availableAjax');        return $url;     }     public function getActionSoap(){                $url    = Mage::getUrl('redeempoint/customer/create');        return $url;     }          public function getActionSoapAjax(){                $url    = Mage::getUrl('redeempoint/customer/createAjax');        return $url;     }     public function isEnable($type){        $value  = Mage::getStoreConfig("redeempoint/$type/active");        return $value;     }     public function getMemberCardValue($type){        $customer = Mage::getSingleton('customer/session')->getCustomer();         if ($type == "AHI") {            return $customer->getMemberAce($post);         }elseif ($type == "TGI") {             return $customer->getMemberToyskingdom($post);         }elseif ($type=="HCI") {            return $customer->getMemberInforma($post);         } else {            return false;         }     }     public function getPoint() {                require_once (BP . DS .'lib/Nusoap/lib/nusoap.php');                $type = $this->getRequest()->getPost('type');        $wsdl = Mage::getStoreConfig("redeempoint/config/api");        $client = new nusoap_client($wsdl, 'wsdl');        $session = Mage::getSingleton('core/session');        $err = $client->getError();        if ($err) {            echo '<h2>Constructor error</h2>' . $err;            exit();        }        $cardID = $this->getRequest()->getPost('memberid');        $passKey = $this->getRequest()->getPost('memberpin');        $param    = array('company' => $type,'cardID' => $cardID, 'passKey' => $passKey);         $response = $client->Call("getPoint", $param);        $response = json_decode($response['getPointResult'],true);        if(!isset($response[0]['point'])) {             $url   = Mage::getUrl('redeempoint/customer');             $erorMesage=$response[0]['errMsg'];             $session->addError($this->__($erorMesage));             Mage::app()->getFrontController()->getResponse()->setRedirect($url);        } else {            return $response[0]['point'];        }     }}